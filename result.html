<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Recommendations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .skills-section, .jobs-section, .gaps-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .skill-category {
            margin-bottom: 15px;
        }
        
        .skill-category h3 {
            margin-bottom: 5px;
            color: #3498db;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        
        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .skill-tag {
            background: #e3f2fd;
            color: #1565c0;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
        }
        
        .job-card {
            background: white;
            border-left: 4px solid #3498db;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .job-title {
            font-size: 20px;
            color: #2c3e50;
            margin: 0;
        }
        
        .job-company {
            color: #7f8c8d;
            font-weight: normal;
        }
        
        .job-score {
            background: #2ecc71;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .job-score.medium {
            background: #f39c12;
        }
        
        .job-score.low {
            background: #e74c3c;
        }
        
        .job-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .job-detail {
            font-size: 14px;
        }
        
        .job-detail-label {
            font-weight: bold;
            color: #7f8c8d;
            display: block;
        }
        
        .matched-skills {
            margin-top: 10px;
        }
        
        .skill-match {
            display: inline-block;
            background: #e3f2fd;
            color: #1565c0;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 13px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .gap-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .gap-skill {
            font-weight: bold;
        }
        
        .gap-count {
            background: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        .dashboard-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .dashboard-card {
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Your Career Dashboard</h1>
            <p>Based on your uploaded resume</p>
        </header>
        
        <section class="skills-section">
            <h2>Your Skills Profile</h2>
            
            {% for category, skills in categorized_skills.items() %}
                {% if category != "all" and skills %}
                    <div class="skill-category">
                        <h3>{{ category.replace('_', ' ').title() }}</h3>
                        <div class="skill-tags">
                            {% for skill in skills %}
                                <span class="skill-tag">{{ skill }}</span>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </section>
        
        {% if skill_gaps %}
        <section class="gaps-section">
            <h2>Recommended Skills to Learn</h2>
            <p>Based on top matching jobs, consider learning these skills:</p>
            
            <div class="gap-list">
                {% for skill, count in skill_gaps %}
                    <div class="gap-item">
                        <span class="gap-skill">{{ skill }}</span>
                        <span class="gap-count">Found in {{ count }} job{% if count > 1 %}s{% endif %}</span>
                    </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}
        
        <section class="jobs-section">
            <h2>Matching Jobs ({{ jobs|length }})</h2>
            
            {% if jobs %}
                {% for job in jobs %}
                <div class="job-card">
                    <div class="job-header">
                        <h3 class="job-title">{{ job.title }} <span class="job-company">at {{ job.company }}</span></h3>
                        
                        {% if job.match_score > 75 %}
                            <span class="job-score">{{ job.match_score }}% Match</span>
                        {% elif job.match_score > 50 %}
                            <span class="job-score medium">{{ job.match_score }}% Match</span>
                        {% else %}
                            <span class="job-score low">{{ job.match_score }}% Match</span>
                        {% endif %}
                    </div>
                    
                    <div class="job-details">
                        <div class="job-detail">
                            <span class="job-detail-label">Location</span>
                            {{ job.location }}
                        </div>
                        
                        <div class="job-detail">
                            <span class="job-detail-label">Experience</span>
                            {{ job.experience }}
                        </div>
                        
                        <div class="job-detail">
                            <span class="job-detail-label">Salary</span>
                            {{ job.salary }}
                        </div>
                        
                        {% if job.get('semantic_score') %}
                        <div class="job-detail">
                            <span class="job-detail-label">Semantic Match</span>
                            {{ job.semantic_score }}%
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="job-detail">
                        <span class="job-detail-label">Required Skills</span>
                        {{ job.skills }}
                    </div>
                    
                    <div class="matched-skills">
                        <span class="job-detail-label">Your Matching Skills</span>
                        <div>
                            {% for skill in job.matched_skills %}
                                <span class="skill-match">{{ skill }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>No matching jobs found. Try uploading a different resume or adding more skills to your current one.</p>
            {% endif %}
        </section>
        
        <div style="text-align: center; margin-top: 20px;">
            <a href="/" style="display: inline-block; padding: 10px 20px; background: #3498db; color: white; text-decoration: none; border-radius: 5px;">Upload Another Resume</a>
        </div>
    </div>
</body>
</html>